" vim: fdm=marker foldlevel=0

set nocompatible

" {{{ Plugins
call plug#begin('~/.vim/plugins')
Plug 'airblade/vim-gitgutter'
Plug 'chrisbra/vim-diff-enhanced'
Plug 'ctrlpvim/ctrlp.vim'
Plug 'easymotion/vim-easymotion'
Plug 'haya14busa/incsearch.vim'
Plug 'mbbill/undotree'
Plug 'mhinz/vim-grepper'
Plug 'mhinz/vim-startify'
Plug 'morhetz/gruvbox'
Plug 'neomake/neomake'
Plug 'osyo-manga/vim-over'
Plug 'rhysd/vim-clang-format'
Plug 'romainl/vim-qf'
Plug 'rust-lang/rust.vim'
Plug 'scrooloose/nerdcommenter'
Plug 'scrooloose/nerdtree', { 'on': 'NERDTreeToggle' }
Plug 'sheerun/vim-polyglot'
Plug 'SirVer/ultisnips'
Plug 'tpope/vim-abolish'
Plug 'tpope/vim-fugitive'
Plug 'tpope/vim-surround'
Plug 'Valloric/YouCompleteMe'
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'vimwiki/vimwiki'
call plug#end()
" }}}

" {{{ General settings
set autoindent
set autoread
set breakindent
set directory=~/.vim/swapfiles//
set expandtab
set fileformats=unix,dos,mac
set foldlevel=99
set foldmethod=syntax
set foldopen+=jump
set formatoptions+=j
set grepformat=%f:%l:%c:%m
set grepprg=rg\ --vimgrep\ $*
set history=1000
set hlsearch
set ignorecase
set imactivatekey=C-N
set incsearch
set laststatus=2
set linebreak
set mouse=a
set nobackup
set nowritebackup
set number
set scrolloff=12
set shiftwidth=4
set showbreak=...\ \ 
set smartcase
set smarttab
set spelllang=en
set splitbelow
set splitright
set tabstop=4
set termguicolors
set textwidth=100
set timeoutlen=1000
set title
set ttimeoutlen=10
set wildmode=longest,list
" }}}

" {{{ GUI
if has("gui_running")
    set guifont=Source\ Code\ Pro\ 10
    set guioptions-=e
    set guioptions-=L
    set guioptions-=m
    set guioptions-=r
    set guioptions-=T
endif
" }}}

" {{{ Colorscheme
let g:gruvbox_termcolors=16
set background=dark
let g:gruvbox_italic = 1
let g:gruvbox_bold = 0
let g:gruvbox_contrast_dark = "soft"
let g:gruvbox_invert_selection = 0
colorscheme gruvbox
" }}}

" {{{ Plugin settings

" {{{ 'bling/vim-airline'
let g:airline_powerline_fonts = 1
" }}}

" {{{ 'chrisbra/vim-diff-enhanced'
let &diffexpr='EnhancedDiff#Diff("git diff", "--diff-algorithm=patience")'
" }}}

" {{{ 'ctrlpvim/ctrlp.vim'
let g:ctrlp_user_command = {
    \ 'types': {
    \ 1: ['.git', 'cd %s && git ls-files -co --exclude-standard'],
    \ },
    \ 'fallback': 'find %s -type f'
    \ }
" }}}

" {{{ 'mbbill/undotree'
let g:undotree_SetFocusWhenToggle = 1
" }}}

" {{{ 'mhinz/vim-grepper'
let g:grepper = { }
let g:grepper.tools = ['rg', 'ag', 'git', 'grep']
" }}}

" {{{ Plug 'neomake/neomake'
autocmd! BufWritePost * Neomake
let g:neomake_c_enabled_makers = [ ]
let g:neomake_cpp_enabled_makers = [ ]
" }}}

" {{{ 'scrooloose/nerdcommenter'
let g:NERDCreateDefaultMappings = 0
let g:NERDSpaceDelims = 1
let g:NERDDefaultAlign = 'left'
let g:NERDCommentEmptyLines = 1
let g:NERDTrimTrailingWhitespace = 1
" }}}

" {{{ 'scrooloose/nerdtree'
let NERDTreeChDirMode = 2
" }}}

" {{{ 'SirVer/ultisnips'
let g:UltiSnipsExpandTrigger = '<C-l>'
let g:UltiSnipsJumpForwardTrigger = '<C-j>'
let g:UltiSnipsJumpBackwardTrigger = '<C-k>'
" }}}

" {{{ 'Valloric/YouCompleteMe'
let g:ycm_autoclose_preview_window_after_insertion = 1
let g:ycm_collect_identifiers_from_tags_files = 1
let g:ycm_filetype_blacklist = {
            \ 'tagbar' : 1,
            \ 'qf' : 1,
            \ 'notes' : 1,
            \ 'markdown' : 1,
            \ 'unite' : 1,
            \ 'text' : 1,
            \ 'pandoc' : 1,
            \ 'infolog' : 1,
            \ 'mail' : 1
            \ }
let g:ycm_key_list_select_completion = ['<TAB>', '<Down>', '<C-j>']
let g:ycm_key_list_previous_completion = ['<S-TAB>', '<Up>', '<C-k>']
" }}}

" {{{ 'vimwiki/vimwiki'
let g:vimwiki_map_prefix = '<Leader>aw'
let g:vimwiki_folding = 'syntax'
" autocmd FileType vimwiki inoremap <silent><buffer> <M-CR> <ESC>:VimwikiReturn 4 2<CR>
" }}}

" {{{ 'romainl/vim-qf'
let g:qf_mapping_ack_style = 1
" }}}

" }}}

" {{{ Keybindings
let mapleader = "ÃŸ"

" {{{ General
nnoremap Q <nop>
noremap j gj
noremap k gk
vnoremap < <gv
vnoremap > >gv
nnoremap <leader><tab> <C-^>
noremap <A-j> <C-e>
noremap <A-k> <C-y>
nmap <silent> <leader>n :nohlsearch<CR>
map <M-CR> <S-CR>
imap <M-CR> <S-CR>
map / <Plug>(incsearch-forward)
map ? <Plug>(incsearch-backward)
map & :OverCommandLine<CR>
" }}}

" {{{ Applications (a)
nmap <silent> <leader>au :UndotreeToggle<CR>
nmap <silent> <leader>af :NERDTreeToggle<CR>
" }}}

" {{{ Buffers (b)
nmap <leader>bb :CtrlPBuffer<CR>
nmap <leader>bd :bd<CR>
" }}}

" {{{ Commenting (c)
map <leader>cc <plug>NERDCommenterToggle
map <leader>cy <plug>NERDCommenterYank
map <leader>ca <plug>NERDCommenterAppend
" }}}

" {{{ Errors / Quickfix (e) / Location List (r)
nmap <silent> <leader>ee <plug>QfSwitch
nmap <silent> <leader>eo <plug>QfCtoggle
nmap <silent> <leader>ej <plug>QfCnext
nmap <silent> <leader>ek <plug>QfCprevious
nmap <silent> <leader>ro <plug>QfLtoggle
nmap <silent> <leader>rj <plug>QfLnext
nmap <silent> <leader>rk <plug>QfLprevious
autocmd FileType qf map <buffer> <C-j> }
autocmd FileType qf map <buffer> <C-k> {
autocmd FileType qf map <silent> <buffer> q :q<CR>
" }}}

" {{{ Files (f)
nmap <leader>fs :w<CR>
nmap <leader>fp :CtrlP<CR>
" }}}

" {{{ Git / Grep (g)
nmap <silent> <leader>gs :Gstatus<CR>
nmap <silent> <leader>gc :Gcommit<CR>
nmap <silent> <leader>gd :Gdiff<CR>
nmap <leader>gw :Gwrite<CR>
nmap <silent> <leader>* :Grepper -cword -noprompt<CR>
nmap <leader>gg :Grepper<CR>
nmap gs <plug>(GrepperOperator)
xmap gs <plug>(GrepperOperator)
nmap <silent> <leader>gs :Gstatus<CR>
" }}}

" {{{ Quit (q)
nmap <silent> <leader>qq :qa<CR>
" }}}

" {{{ Tags (t)
nmap <silent> <leader>tt :CtrlPTag<CR>
noremap <leader>tl <C-]>
nmap <silent> <leader>tj :tag<CR>
nmap <silent> <leader>tk :pop<CR>
nmap <silent> <leader>ts :tags<CR>
" }}}

" {{{ Toggles (T)

nmap <silent> <leader>Tl :setlocal number!<CR>

" {{{ Spelling (s)
nmap <silent> <leader>Tss :setlocal spell!<CR>
nmap <silent> <leader>Tse :setlocal spelllang=en<CR>
nmap <silent> <leader>Tsd :setlocal spelllang=de<CR>
" }}}

" }}}

" {{{ Windows (w)
nnoremap <leader>1 1<C-w>w
nnoremap <leader>2 2<C-w>w
nnoremap <leader>3 3<C-w>w
nnoremap <leader>4 4<C-w>w
nnoremap <leader>ws <C-w>s
nnoremap <leader>wv <C-w>v
nnoremap <leader>wd <C-w>c
nnoremap <leader>wm <C-w>o
nnoremap <leader>w= <C-w>=
nnoremap <leader>ww <C-w>w
nnoremap <leader>wh <C-w>h
nnoremap <leader>wj <C-w>j
nnoremap <leader>wk <C-w>k
nnoremap <leader>wl <C-w>l
nnoremap <leader>wH <C-w>H
nnoremap <leader>wJ <C-w>J
nnoremap <leader>wK <C-w>K
nnoremap <leader>wL <C-w>L
" }}}

" }}}
