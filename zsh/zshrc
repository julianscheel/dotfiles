#!/bin/zsh

# Install zgen if necessary
if [ ! -d ~/.zgen ]; then
    echo "Installing zgen"
    git clone https://github.com/tarjoilija/zgen.git ~/.zgen
fi

# Load zgen
source ~/.zgen/zgen.zsh

# Check if there's no init script
if ! zgen saved; then
    echo "Creating a zgen save"

    zgen oh-my-zsh lib/key-bindings.zsh
    zgen oh-my-zsh lib/history.zsh
    zgen oh-my-zsh lib/theme-and-appearance.zsh
    zgen oh-my-zsh lib/git.zsh
    zgen load zsh-users/zsh-completions src
    zgen load zsh-users/zsh-syntax-highlighting
    zgen load zsh-users/zsh-history-substring-search

    # Theme
    zgen load caiogondim/bullet-train-oh-my-zsh-theme bullet-train

    # Save init script
    zgen save
fi

# Bankert colorscheme
~/code/bankert-theme/term/bankert.sh

# bullet-train colors
export BULLETTRAIN_STATUS_FG=black
export BULLETTRAIN_DIR_FG=black

# bind C-k and C-j for history browsing
bindkey '^K' history-substring-search-up
bindkey '^J' history-substring-search-down

# Completions
zstyle ':completion:*' menu select

# Aliases
alias em=$EDITOR
